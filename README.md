# Yandex Multimodal Assistant

## Описание проекта  
**Yandex Multimodal Assistant** — это проактивный ассистент-бот для абитуриентов МАИ. Система состоит из **агента** и **Telegram-бота**

### Цель  
- Закрывают до 90 % типовых вопросов без участия человека  
- Отвечают за ≤ 20 секунд  
- Обрабатывают до 2000 сообщений в день 


## Основные компоненты

### 1. Telegram-бот (`src/telegram_bot`)  
Интерфейс пользователя в Telegram, реализованный на **aiogram v3**.  
- **loader.py** — инициализация бота, установка команд  
- **handlers/** — команды `/start`, `/instruction`, `/help`, обработка текстовых и голосовых сообщений  
- **dao/** — `UserDAO` (SQLAlchemy AsyncSession + PostgreSQL) для работы с таблицей `users` (профиль, история, портрет)  
- **middleware.py** — управление сессиями через DAO  
- **models/** — ORM-модель `User` (поле `current_messages: JSON`, `psychological_profile` и др.)

### 2. Агент (`src/react_agent`)  
Обрабатывает запросы, обращается к инструментам и собирает ответ.  
- **graph.py** — граф и логика переходов состояния агента  
- **prompts.py** — шаблоны system/user-prompt для LLM  
- **state.py** — внутреннее состояние агента, управление сессией диалога  
- **tools.py** — реализация инструментов:  
  - расчёт стипендий и проходных баллов  
  - стоимость обучения  
  - поиск по внешним источникам  и тд
- **configuration.py** — параметры моделей и системные подсказки

### 3. Данные и предобработка (`src/react_agent/data`)  

Источник знаний для RAG-подхода.  
- **Источники**: сайт priem.mai, PDF-документы, Telegram-чаты абитуриентов, посты «ВКонтакте», Google Forms  
- **OCR**: Yandex OCR для сканов PDF  
- **Предобработка**:  
  1. удаление шума и дубликатов  
  2. семантическая кластеризация (~2000 токенов на чанк)  
  3. суммаризация чанков  
  4. теггинг по 30+ тематическим меткам  

### 4. Индекс и поиск  
- **qDrant** для эмбеддингов и гибридного поиска  
- **Метаданные** для точной фильтрации по теме  

### 5. Speech-to-Text  
- **Yandex SpeechKit** для распознавания голосовых сообщений в Telegram  

## Архитектура
![Архитектура](data\архитектура-Архитектура.drawio.png)


[Презентация решения](https://www.canva.com/design/DAGmD4NibeA/nDMmDWEzgEbTpb3zFBArRg/edit)

[Google Drive](https://drive.google.com/drive/folders/1DAMl06ZVpxBqQhkPIB5iLdKH2YCAKFY5) 

